import{j as r,L as w,a as t,r as d,A as $}from"./index.63ed131b.js";import{u as x}from"./useQuery.esm.8a5dcb37.js";const j=a=>{const{name:e,animal:o,breed:s,images:i,location:m,id:l}=a;let c="http://pets-images.dev-apis.com/pets/none.jpg";return i.length&&(c=i[0]),r(w,{to:`/details/${l}`,className:"relative block",children:[t("div",{className:"image-container",children:t("img",{src:c,alt:e})}),r("div",{className:"absolute bottom-0 left-0 bg-gradient-to-tr from-white to-transparent pr-2 pt-2",children:[t("h1",{children:e}),t("h2",{children:`${o} \u2014 ${s} \u2014 ${m}`})]})]})},S=({pets:a})=>t("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:a.length?a.map(e=>t(j,{animal:e.animal,name:e.name,breed:e.breed,images:e.images,location:`${e.city}, ${e.state}`,id:e.id},e.id)):t("h1",{children:"No pets found"})});async function L({queryKey:a}){const e=a[1];if(!e)return[];const o=await fetch(`http://pets-v2.dev-apis.com/breeds?animal=${e}`);if(!o.ok)throw new Error(`breeds ${e} fetch not ok`);return o.json()}function A(a){var o,s;const e=x(["breeds",a],L);return[(s=(o=e==null?void 0:e.data)==null?void 0:o.breeds)!=null?s:[],e.status]}async function P({queryKey:a}){const{animal:e,location:o,breed:s}=a[1],i=await fetch(`http://pets-v2.dev-apis.com/pets?animal=${e}&location=${o}&breed=${s}`);if(!i.ok)throw new Error("Could not find pets");return i.json()}const k=["bird","cat","dog","rabbit","reptile"],F=()=>{var p,b;const[a,e]=d.exports.useState({location:"",animal:"",breed:""}),[o,s]=d.exports.useState(""),[i,m]=d.exports.useState(""),l=A(o),[c]=d.exports.useContext($),h=x(["search",a],P),N=(b=(p=h==null?void 0:h.data)==null?void 0:p.pets)!=null?b:[];return r("div",{className:"my-0 mx-auto w-11/12",children:[r("form",{className:"p-10 mb-10 rounded-lg bg-gray-200 shadow-lg flex flex-col justify-center items-center",onSubmit:n=>{var g,f,v;n.preventDefault();const u=new FormData(n.target),y={animal:(g=u.get("animal"))!=null?g:"",breed:(f=u.get("breed"))!=null?f:"",location:(v=u.get("location"))!=null?v:""};e(y)},children:[c?t("div",{className:"pet image-container",children:t("img",{src:c.images[0],alt:""})}):null,r("label",{htmlFor:"location",children:["Location",t("input",{id:"location",placeholder:"Location",name:"location",type:"text",className:"search-input"})]}),r("label",{htmlFor:"animal",children:["Animal",r("select",{className:"search-input",id:"animal",name:"animal",onChange:n=>{s(n.target.value),m("")},children:[t("option",{}),k.map(n=>t("option",{value:n,children:n},n))]})]}),r("label",{htmlFor:"breed",children:["Breed",r("select",{disabled:!l.length,className:"search-input grayed-out-disable",id:"breed",name:"breed",children:[t("option",{}),l[0].map(n=>t("option",{value:n,children:n},n))]})]}),t("button",{className:"rounded px-6 py-2 text-white hover:opacity-50 border-none bg-orange-500",children:"Submit"})]}),t(S,{pets:N})]})};export{F as default};
